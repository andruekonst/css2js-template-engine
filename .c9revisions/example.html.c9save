{"ts":1354291705959,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1354291713489,"patch":[[{"diffs":[[1,"<html>\r\n    <head>\r\n\t\t<script src=\"generate.js\"></script>\r\n\t\t<script>\r\n\t\t\tvar $ = (function(query){ return document.querySelectorAll(query);});\r\n\t\t\tvar $event = (function(o, e, f, b){ return o.addEventListener(e, f, b);});\r\n\t\t\tvar $el = (function(type){ return document.createElement(type);});\r\n\t\t\tvar $hide = (function(e){ return e.style.display = \"none\";});\r\n\t\t\tvar $log = (function(m){ if(typeof(m) == \"string\"){ return console.log(\"[Debug]: \" + m);}else{ console.log(\"[Debug]: \"); return console.log(m);}});\r\n\t\t\tvar $ls = localStorage;\r\n\r\n\t\t\t// Add-click -> Todos.add(edit.value), localStorage.add(edit.value)\r\n\t\t\tvar app = {};\r\n\t\t\tapp.db = {};\r\n\t\t\tapp.count = 0;\r\n\t\t\tapp.db.add = (function(el, id){\r\n\t\t\t\tvar db_count = $ls.getItem(\"db\");\r\n\t\t\t\t$ls.setItem(\"db-count\", app.count);\r\n\t\t\t\t$ls.setItem(\"db-\" + id, el.innerHTML);\r\n\t\t\t});\r\n\t\t\tapp.db.remove = (function(e, c){\r\n\t\t\t\t// $ls.setItem(\"db-\" + c, null);\r\n\t\t\t\t$ls.setItem(\"db-\" + e.id.split(\"-\")[2], null);\r\n\t\t\t});\r\n\t\t\tapp.add = (function(input){\r\n\t\t\t\tvar el = $el(\"li\");\r\n\t\t\t\tel.id = \"todo-elem-\" + app.count;\r\n\t\t\t\tel.innerHTML = input.value;\r\n\t\t\t\tinput.value = \"\";\r\n\t\t\t\tinput.focus();\r\n\t\t\t\t$(\"#todos\")[0].appendChild(el);\r\n\t\t\t\t$event(el, \"click\", (function(){ app.remove(el, app.count);}), true);\r\n\t\t\t\tapp.count++;\r\n\t\t\t\tapp.db.add(el, app.count);\r\n\t\t\t\t$log(\"Element added, count = \" + app.count);\r\n\t\t\t});\r\n\t\t\tapp.remove = (function(el, c){\r\n\t\t\t\t$hide(el);\r\n\t\t\t\tapp.db.remove(el, c);\r\n\t\t\t});\r\n\t\t\tapp.compile = (function(){\r\n\t\t\t\tvar __dom = generateDom($(\"#template\")[0].innerHTML);\r\n\t\t\t\tvar __content = $el(\"div\");\r\n\t\t\t\t__content.id = \"content\";\r\n\t\t\t\t$(\"body\")[0].appendChild(__content);\r\n\t\t\t\t$(\"body\")[0].innerHTML = __dom.code;\r\n\t\t\t\teval(__dom.jsCode);\r\n\t\t\t});\r\n\t\t\tvar load = (function(){\r\n\t\t\t\tapp.compile();\r\n\t\t\t\t$event($(\"#todo-edit-button\")[0], \"click\", (function(){ app.add($(\"#todo-edit-input\")[0]);}), true);\r\n\t\t\t\t$event($(\"#todo-edit-input\")[0], \"keypress\", (function(e){ if(e.keyCode == 13){ app.add($(\"#todo-edit-input\")[0]);}}), true);\r\n\t\t\t\tif($ls.getItem(\"db-count\") != null){\r\n\t\t\t\t\tvar db_count = $ls.getItem(\"db-count\");\r\n\t\t\t\t\tfor(var i = 0; i <= db_count; i++){\r\n\t\t\t\t\t\tif($ls.getItem(\"db-\" + i) != \"null\" & $ls.getItem(\"db-\" + i) != null){\r\n\t\t\t\t\t\t\tvar el = $el(\"li\");\r\n\t\t\t\t\t\t\tel.id = \"todo-elem-\" + i;\r\n\t\t\t\t\t\t\tel.innerHTML = $ls.getItem(\"db-\" + i); \r\n\t\t\t\t\t\t\t$(\"#todos\")[0].appendChild(el);\r\n\t\t\t\t\t\t\t$event(el, \"click\", (function(){ app.remove(el, i - 1);}), true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tapp.count = db_count;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$ls.setItem(\"db-count\", 0);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t</script>\r\n\t</head>\r\n<body onload=\"load();\">\r\n\r\n</body>\r\n<script id=\"template\" type=\"template\">\r\n\tdiv#todolist{\r\n\t\tdiv#edit{\r\n\t\t\tinput#todo-edit-input{\r\n\t\t\t\ttype: text;\r\n\t\t\t}\r\n\t\t\tinput#todo-edit-button{\r\n\t\t\t\ttype: button;\r\n\t\t\t\tvalue: Add;\r\n\t\t\t}\r\n\t\t}\r\n\t\tul#todos{\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":2839}]],"length":2839,"saved":false}
