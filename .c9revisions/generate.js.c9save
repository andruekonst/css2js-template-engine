{"ts":1354291688653,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1354291692012,"patch":[[{"diffs":[[1,"function generateDom(text_template){\r\n    var stack = []; // Â ñòåêå áóäóò õðàíèòüñÿ îáúåêòû {type, value}\r\n\tvar collect = \"\";\r\n\tvar type = \"\";\r\n\tvar value = \"\";\r\n\tvar blocks = [];\r\n\tvar text = \"\" + text_template;\r\n\tvar code = \"\";\r\n\tvar count = 0;\r\n\tvar jsCode = \"var elems = [];\"; // var jsCode = \"\";\r\n\tvar quote = \"\";\r\n\tfor(var i = 0; i < text.length; i++){\r\n\t\tif((text[i] != \"{\") && (text[i] != \"}\") && (text[i] != \";\") && (text[i] != \":\")){\r\n\t\t\tcollect += text[i];\r\n\t\t}else if(text[i] == \"{\"){\r\n\t\t\tstack.push({type: \"start\", value: collect});\r\n\t\t\tblocks.push(collect);\r\n\t\t\tblockId = \"\";\r\n\t\t\tblockClass = \"\";\r\n\t\t\tblockEqual = \"\";\r\n\t\t\tcount += 1;\r\n\t\t\ttry{\r\n\t\t\t\tif(collect.search(\"#\" + collect.split(/[#.=]/)[1]) != -1){\r\n\t\t\t\t\tblockId = collect.split(/[#.=]/)[1];\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tif(collect.search(\"#\" + collect.split(/[#.=]/)[2]) != -1){\r\n\t\t\t\t\tblockId = collect.split(/[#.=]/)[2];\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tif(collect.search(\"\\\\.\" + collect.split(/[#.=]/)[1]) != -1){\r\n\t\t\t\t\tblockClass = collect.split(/[#.=]/)[1];\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tif(collect.search(\"\\\\.\" + collect.split(/[#.=]/)[2]) != -1){\r\n\t\t\t\t\tblockClass = collect.split(/[#.=]/)[2];\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tif(collect.search(\"=\" + collect.split(/[#.=]/)[1]) != -1){\r\n\t\t\t\t\tblockEqual = collect.split(/[#.=]/)[1];\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tif(collect.search(\"=\" + collect.split(/[#.=]/)[2]) != -1){\r\n\t\t\t\t\tblockEqual = collect.split(/[#.=]/)[2];\r\n\t\t\t\t}\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t\tif(blockId == \"\"){\r\n\t\t\t\tblockId = \"\" + count;\r\n\t\t\t}\r\n\t\t\tvar __tag = collect.split(/[#.=]/)[0].split(/\\s/).join(\"\");\r\n\t\t\tif((__tag == \"div\") | (__tag == \"span\") | (__tag == \"ul\") | (__tag == \"input\")){\r\n\t\t\t\tcode += '<' + __tag + ' id=\"' + blockId + '\"' + ' class=\"' + blockClass + '\"' + '>';\r\n\t\t\t}else if(__tag == \"a\"){\r\n\t\t\t\tif(blockEqual == \"\"){\r\n\t\t\t\t\tblockEqual = \"#\" + collect.split(/[#.=]/)[2].split(/\\s/).join(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tcode += '<' + __tag + ' id=\"' + blockId + '\"' + ' href=\"' + blockEqual + '\"' + ' class=\"' + blockClass + '\"' + '>';\r\n\t\t\t}else{\r\n\t\t\t\tcode += '<' + __tag + '>';\r\n\t\t\t}\r\n\t\t\t// jsCode += 'var elem = document.getElementById(\"' + blockId + '\");';\r\n\t\t\tjsCode += 'elems.push(document.getElementById(\"' + blockId + '\"));';\r\n\t\t\tcollect = \"\";\r\n\t\t}else if(text[i] == \"}\"){\r\n\t\t\tstack.push({type: \"end\", value: \"}\"});\r\n\t\t\tcode += \"</\" + blocks[blocks.length - 1].split(/[#.=]/)[0].split(/\\s/).join(\"\") + \">\";\r\n\t\t\t// blocks.splice(1, blocks.length);\r\n\t\t\tblocks.length -= 1;\r\n\t\t}else if(text[i] == \";\"){\r\n\t\t\tif(quote == \"\"){\r\n\t\t\t\tvalue = collect;\r\n\t\t\t\tif(value[0] == \" \"){\r\n\t\t\t\t\tvalue = value.split(/\\s/).join(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tstack.push({type: type, value: value});\r\n\t\t\t\tstack.push({type: \"end\", value: \";\"});\r\n\t\t\t\tif(type.split(/\\s/).join(\"\") == \"content\"){\r\n\t\t\t\t\t// code += value.split(/[']/).split(/[\"]/).join(\"\");\r\n\t\t\t\t\tcode += value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// jsCode += 'elem.' + type.split(/\\s/).join(\"\") + ' = \"' + value + '\";';\r\n\t\t\t\t\tjsCode += 'elems[elems.length - 1].' + type.split(/\\s/).join(\"\") + ' = \"' + value + '\";';\r\n\t\t\t\t}\r\n\t\t\t\ttype = \"\";\r\n\t\t\t\tvalue = \"\";\r\n\t\t\t\tcollect = \"\";\r\n\t\t\t}else{\r\n\t\t\t\tcollect += \";\";\r\n\t\t\t}\r\n\t\t}else if(text[i] == \":\"){\r\n\t\t\tif(quote == \"\"){\r\n\t\t\t\ttype = collect;\r\n\t\t\t\tcollect = \"\";\r\n\t\t\t}else{\r\n\t\t\t\tcollect += \":\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif((text[i] == \"'\") || (text[i] == '\"')){\r\n\t\t\tif(quote == \"\"){\r\n\t\t\t\tquote = text[i];\r\n\t\t\t}else if(quote == \"'\"){\r\n\t\t\t\tif(text[i] == \"'\"){\r\n\t\t\t\t\tquote = \"\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tquote += '\"';\r\n\t\t\t\t}\r\n\t\t\t}else if(quote == '\"'){\r\n\t\t\t\tif(text[i] == '\"'){\r\n\t\t\t\t\tquote = \"\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tquote += \"'\";\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}else if(quote == \"'\" + '\"'){\r\n\t\t\t\tif(text[i] == '\"'){\r\n\t\t\t\t\tquote = \"'\";\r\n\t\t\t\t}\r\n\t\t\t}else if(quote == '\"' + \"'\"){\r\n\t\t\t\tif(text[i] == \"'\"){\r\n\t\t\t\t\tquote = '\"';\r\n\t\t\t\t}\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn {code: code, jsCode: jsCode, stack: stack};\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":3985}]],"length":3985,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354297797056,"patch":[[{"diffs":[[0,";\r\n\t\t\t\t\t"],[1,"// "],[0,"jsCode +"]],"start1":3103,"start2":3103,"length1":16,"length2":19},{"diffs":[[0,"ue + '\";';\r\n"],[1,"\t\t\t\t\tjsCode += 'if(typeof(elems[elems.length - 1].' + type.split(/\\s/).join(\"\") + ') != \"undefined\"){ elems[elems.length - 1].' + type.split(/\\s/).join(\"\") + ' = \"' + value + '\";}else{ elems[elems.length - 1].style.' + type.split(/\\s/).join(\"\") + ' = \"' + value + '\";}';\r\n"],[0,"\t\t\t\t}\r\n\t\t\t\tt"]],"start1":3193,"start2":3193,"length1":24,"length2":296}]],"length":4260,"saved":false}
